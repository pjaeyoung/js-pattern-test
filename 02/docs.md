# 2장 도구 다루기

## 2.1 테스팅 프레임워크
- 단위 테스트가 없는 기존코드를 작업할 땐 실제 기능을 확인하는 테스트를 작성해야 한다. 그래야 밖으로 표출되는 기능을 변경하지 않은 상태에서 코드를 리팩토링할 수 있다. 
- 테스트성과 SOLID 개발 원칙에 따른 코드(유지 보수성과 확장성이 우수한 코드)는 상관관계가 있다. 
- 테스트 더블(test double) : 어떤 함수/객체의 본래 구현부를 테스트 도중 다른(보통은 더 간단한) 코드로 대체한 것, 웹서비스 같은 외부 자원과의 의존관계를 없애고 단위 테스트의 복잡도를 낮출 목적으로 사용 
    - 더미(dummy) : 보통 인자 리스트를 채우기 위해 사용. 전달은 하지만 사용되지 않음
    - 틀(stub) : 더미를 조금 더 구현하여 아직 개발되지 않은 클래스나 메서드가 실제 작동하는 것처럼 보이게 만든 객체, 보통 리턴값은 하드코딩
    - 스파이(spy) : 틀과 비슷하지만 내부적으로 기록을 남김, 특정 객체가 사용되었는지, 예상되는 메서드가 특정한 인자로 호출되었는지 등의 상황을 감시하고 이러한 정보를 제공
    - 모의체(fake) : 틀에서 조금 더 발전하여 실제로 간단히 구현된 코드를 갖고 있지만 운영환경에서 사용할 수 없는 객체
    - 모형(mock) : 더미, 틀, 스파이를 혼합한 형태와 비슷하나 행위를 검증하는 용도로 주로 사용 
- 통합 테스트(integration test): 외부 시스템과 연동하는 코드에 이상이 없는지 확인하는 테스트 

## 2.2 의존성 주입 프레임워크
- 다음 질문 중 한 가지라도 답변이 예라면 직접 인스턴스화하지 말고 주입(DI) 방향으로 생각을 전환하라
    - 객체 또는 의존성 중 어느 하나라도 DB, 설정 파일, HTTP, 기타 인프라 등의 외부 자원에 의존하는가 
    - 객체 내부에서 발생할 지 모를 에러를 테스트에서 고려해야 하나 
    - 특정한 방향으로 객체를 작동시켜야 할 테스트가 있는가 
    - 이 서드파티 제공 객체가 아니라 온전히 내가 소유한 객체인가 
- 의존성 주입 프레임워크 작동 방식
    - 애플리케이션이 시작되자마자 각 인젝터블(모든 의존성을 집합적으로 일컫는 말) 명을 확인하고 해당 인젝터블이 지닌 의존성을 지칭하며 순서대로 DI 컨테이너에 등록
    - 객체가 필요하면 컨테이너에 요청 
    - 컨테이너는 일단 요청 받은 객체와 그 의존성을 모두 재귀적으로 인스턴스화. 그런 다음 요건에 따라 필요한 객체 각각 주입  
- 예외 처리 코드를 제일 먼저 테스트하라. 
- 더욱 확실한 네거티브 테스트를 위해서는 에러가 났다는 사실뿐만 아니라 실제 에러 메세지까지 확인하라. 프로토타입이나 함수를 통해 테스트 대상이 가진 메시지를 밖으로 표출하라. 
- 코드가 전혀 없어도 좋으니 테스트를 성공시킬 최소한의 코드만 작성하라. 애플리케이션 코드가 테스트보다 앞서 나가면 안 된다. 
- 리터럴 대신 변수명을 잘 정해서 DRY하고 자기 서술적인(주석이 필요없는) 테스트를 작성하라. 
## 애스팩트 툴킷
- 애스팩트 지향 프로그래밍(AOP) : 단일한 책임 범위 내에 있지 않은 하나 이상의 객체에 유용한 코드를 한데 묶어 눈에 띄지 않게 객체에 배포하는 기법 
    - 어드바이스(advice) : 배포할 코드 조각
    - 애스팩트(aspect)/횡단 관심사(cross-cutting concern) : 어드바이스가 처리할 문제
- AOP 프레임워크로 개발하면 원본 코드를 하나도 건드리지 않은 채 애플리케이션 시동로직에 코드를 넣을 수 있다. 
- 어떤 코드 블록을 자체로 반복하지 않는 일만큼 다른 코드와 연결하는 부분을 반복하지 않는 일도 중요하다. 
- 자바스크립트 함수는 자신의 고향 집이 아닌 객체에서 얼마든지 실행될 수 있어서 경우에 따라 콘텍스트가 정확한지 반드시 테스트해야 한다.

## 코드 검사 도구 